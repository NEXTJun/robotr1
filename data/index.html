<!DOCTYPE html>
<html>

<head>
  <html lang="zh-Hant-TW">
  <meta charset="utf-8">
  <title>Robot R1</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- 引入 Bootstrap -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/bootstrap-slider.min.css" rel="stylesheet">
  <script src="js/jquery.min.js"></script>
  <style>
    html,
    body {
      height: 100%;
      background-color: #000000;
      background-image: url('img/background.jpg');
      background-repeat: no-repeat;
      background-attachment: fixed;
      background-size: 100% 100%;
    }

    body {
      display: -ms-flexbox;
      display: flex;
      color: #000000;
    }

    .masthead {
      color: #777777;
    }

    .mastfoot {
      color: #777777;
    }

    .popover {
      background: #27282b;
      width: 94%;
      height: auto;
      max-width: 400px;
      padding: 1px;
      border: 1.5px solid #e2e0e07c;
      -webkit-border-radius: 12px;
      -moz-border-radius: 12px;
      border-radius: 12px;
      -webkit-box-shadow: 0 5px 10px #cccccc33;
      -moz-box-shadow: 0 5px 10px #cccccc33;
      box-shadow: 0 10px 20px #cccccc33;
      -webkit-background-clip: padding-box;
      -moz-background-clip: padding;
      background-clip: padding-box;
    }
    
    .bs-popover-right .arrow::after,
    .bs-popover-auto[x-placement^="right"] .arrow::after {
      border-right-color: #5f5f5f;
    }

    .bs-popover-bottom .arrow::after,
    .bs-popover-auto[x-placement^="bottom"] .arrow::after {
      border-bottom-color: #5f5f5f;
    }
    
    .logo{
      max-width: 80px;
    }

    .rgb_logo_style {
      max-height: 120px;
    }

    #rgb_r .slider-selection {
      background: #ff0080;
      box-shadow: 0 3px 6px #fa2a05ab;
    }

    #rgb_r .slider-handle {
      background: #ff2d2d;
      border: 2px solid #ffd2d2;
    }
    
    #rgb_r .slider-handle:hover {
      background: #FF8282;
    }

    #rgb_g .slider-selection {
      background: #11f811;
      box-shadow: 0 3px 6px #02f8bb8c;
    }

    #rgb_g .slider-handle {
      background: #01b468;
      border: 2px solid #d3ff93;
    }
    
    #rgb_g .slider-handle:hover {
      background: #00db49;
    }

    #rgb_b .slider-selection {
      background: #00ffff;
      box-shadow: 0 3px 6px #4402f8a1;
    }

    #rgb_b .slider-handle {
      background: #0072e3;
      border: 2px solid #ddddff;
    }

    #rgb_b .slider-handle:hover {
      background: #6fb7b7;
    }
    
    #rgb_r,
    #rgb_g,
    #rgb_b {
      width: 100%;
    }

    .rgb_change_led1_default {      
      animation: breathing 2s linear infinite alternate;
      -webkit-animation: breathing 2s linear infinite alternate;
    }

    .logo_rotating {
      animation: logo_rotate 300ms linear 2 alternate;
      -webkit-animation: logo_rotate 300ms linear 2 alternate;
    }

    #foot_word{
      user-select: none;
      -webkit-user-select: none;
    }

    @keyframes breathing
    {
      0%   {fill: #333;}
      100% {fill: #ccc;}
    }

    @-webkit-keyframes breathing /* Safari and Chrome */
    {
      0%   {fill: #333;}
      100% {fill: #ccc;}
    }

    @keyframes logo_rotate
    {
      0%   {transform: rotate(0deg);}
      100% {transform: rotate(45deg);}
    }

    @-webkit-keyframes logo_rotate /* Safari and Chrome */
    {
      0%   {-webkit-transform: rotate(0deg);}
      100% {-webkit-transform: rotate(45deg);}
    }
  </style>
</head>

<body class="text-center">
  <div class="cover-container d-flex w-100 h-100 p-2 mx-auto flex-column">
    <header class="masthead mb-auto container-fluid">
      <div class="row">
        <div class="col-3">
          <div class="logo">
            <svg version="1.1" baseProfile="tiny" id="Capa_91" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" overflow="scroll" xml:space="preserve">
              <g>
                <path fill="#ffffff" d="M455.1,0H56.9C25.5,0,0,25.5,0,56.9v398.2C0,486.5,25.5,512,56.9,512h398.2c31.4,0,56.9-25.5,56.9-56.9
                  V56.9C512,25.5,486.5,0,455.1,0z M259,338.5L119.2,154.2h-0.9v164.5c0,22.1-14.1,34.4-33.1,34.4c-19,0-33.1-12.3-33.1-34.4V68.2h0
                  c0-22,14.1-34.4,33.1-34.4c8.4,0,22,6.6,27.8,14.5l139.8,186.6h0.9V68.2c0-22,14.1-34.4,33.1-34.4c19,0,33.1,12.3,33.1,34.4v250.5
                  c0,22.1-14.1,34.4-33.1,34.4C278.4,353.1,265.2,346.5,259,338.5z M466.1,395.3L466.1,395.3c0,74.1-47.2,93.5-87.3,93.5
                  c-30.4,0-81.1-11.9-81.1-50.3c0-11.9,10.1-26.9,24.7-26.9c17.6,0,33.1,16.3,52.9,16.3c24.7,0,24.7-22.9,24.7-37.1V201.2
                  c0-22,14.1-34.4,33.1-34.4c19,0,33.1,12.3,33.1,34.4V395.3z"/>
              </g>
            </svg>
          </span>
        </div>
        <div class="col"></div>
      </div>
    </header>

    <main role="main">
      <div class="container-fluid">
        <div class="row">
          <div class="col"></div>
          <div class="col-sm-10 col-md-6">
            <svg version="1.1" id="Capa_x5F_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 579.3 418.7" style="enable-background:new 0 0 579.3 418.7;" xml:space="preserve">
              <style type="text/css">
                .robot_svg{fill:none;stroke:#ffffff;stroke-width:2;stroke-miterlimit:10;}
                .robot_svg_led1{fill:#1E1E1E;stroke:#ffffff;stroke-width:2;stroke-miterlimit:10;}
                .robot_svg_led2{fill:#00000000;stroke:#ffffff;stroke-width:2;stroke-miterlimit:10;}
                .robot_svg_led2_mobile{fill:#00000000;}
              </style>
              <polygon class="robot_svg" points="147.2,67.3 179.4,36 269.2,20 375.4,27 421.7,52.5 388.4,84.3 298.4,100 193.4,92.8 "/>
              <path class="robot_svg" d="M161.5,41.1"/>
              <path class="robot_svg" d="M236.8,25.8L179.2,6.1L161.5,41l15-2.2c0.3-0.2,3-2.9,3-2.9L236.8,25.8z"/>
              <polygon class="robot_svg" points="193.4,92.8 199.1,362 305.2,370.5 298.4,100 "/>
              <polyline class="robot_svg" points="144.1,120.1 102.7,96.9 79.8,100 "/>
              <polygon class="robot_svg" points="79.8,100 5.7,370.5 69.7,388.5 144.1,120.1 "/>
              <polyline class="robot_svg" points="130.1,170.4 120.2,206.1 125.7,209.3 132.3,204.1 "/>
              <path class="robot_svg" d="M189.2,291.9l-11,8.9l-52.5-91.5l6.6-5.2c1,0.1,1.9,0.2,2.9,0.3c9.9-3.1,15.9-11.8,14.9-20
                c-0.9-7.5-7.4-11.8-8.5-12.5c-3.8-0.5-7.6-1-11.4-1.5l-9.1,32.6c3.8,0.4,7.6,0.7,11.4,1.1"/>
              <polygon class="robot_svg" points="174.2,298.8 178.2,300.8 125.7,209.3 120.2,206.1 117.5,215.9 162.7,292.8 165.2,293.5 174.9,309.3 
                182.2,313.3 "/>
              <polygon class="robot_svg" points="32.5,272.7 40.7,327.7 82.7,341.6 84.5,334.9 46.7,322.3 36.4,258.4 "/>
              <polyline class="robot_svg" points="151.9,274.4 153.3,337.7 199.1,362 197.1,266.6 "/>
              <polyline class="robot_svg" points="197.1,266.6 193.4,92.8 147.2,67.3 150,190.2 "/>
              <polyline class="robot_svg" points="159.3,202.2 157.3,127 185.3,141.7 188.2,251.3 188.1,251.3 151.5,189 149.5,190.6 151.5,189 
                149.9,187.5 "/>
              <polyline class="robot_svg" points="161.6,290.9 162.3,320.3 190.3,336.3 188.2,251.3 "/>
              <path class="robot_svg" d="M390.6,121.9"/>
              <polyline class="robot_svg" points="390.6,121.9 388.4,84.3 298.4,100 305.2,370.5 367.8,359.4 "/>
              <polyline class="robot_svg" points="331.5,148.8 318.6,150.7 322.7,345.5 364.1,338.3 "/>
              <polyline class="robot_svg" points="390.6,121.9 328.7,132.5 331.5,148.8 364.3,339.5 367.8,359.4 "/>
              <line class="robot_svg" x1="418.6" y1="283.5" x2="390.6" y2="121.9"/>
              <polyline class="robot_svg" points="367.8,359.4 376.7,411 438.7,399.5 421.3,299.3 "/>
              <polyline class="robot_svg" points="421.3,299.3 438.7,399.5 457,395.9 408.8,118 390.6,121.9 418.6,283.5 "/>
              <path class="robot_svg" d="M189.2,291.9c-2.6,2.1-5.3,4.2-7.9,6.4c-0.6,1.3-2.1,4.7-1.4,9.1c0.4,2.7,1.6,4.8,2.3,5.9l7.7,4.4L189.2,291.9"
                />
              <path class="robot_svg" d="M174.9,309.3l-9.8-15.8c-0.3,1-0.6,2-0.8,3c0.1,1.1,0.4,5.7,4.2,9.3C170.9,308.2,173.6,309,174.9,309.3z"/>
              <polyline class="robot_svg" points="179.6,311.8 162.3,320.3 190.3,336.3 189.9,317.7 "/>
              <polyline class="robot_svg" points="131.1,238.7 125.7,274 149.3,270 "/>
              <line class="robot_svg" x1="148.5" y1="125.5" x2="141.4" y2="171.8"/>
              <polyline class="robot_svg" points="176.4,38.9 161.5,41.1 159.3,55.5 "/>
              <polygon class="robot_svg" points="467.7,63.5 489.2,28.5 426.1,40.5 "/>
              <polygon class="robot_svg" points="555.2,304.8 576.7,268.5 489.2,28.5 467.7,63.5 "/>
              <polyline class="robot_svg" points="464.1,147 512.2,281.5 555.2,304.8 467.7,63.5 426.1,40.5 446.3,97 "/>
              <polygon class="robot_svg" points="550.2,235.1 537.4,255.9 539.3,261.1 554.4,237.9 546.9,186.8 540,167.9 "/>
              <line class="robot_svg" x1="390.6" y1="121.9" x2="390.7" y2="123.6"/>
              <polyline class="robot_svg" points="423.9,113.7 421.7,52.5 388.4,84.3 390.6,121.9 "/>
              <line class="robot_svg" x1="428.1" y1="229.5" x2="423.9" y2="113.7"/>
              <polyline class="robot_svg" points="342.8,214.7 322.7,288.4 336.7,310.3 350.8,262.2 "/>
              <path class="robot_svg" d="M327.9,296.5h-6.2l1,33.3l15.5-3c3.3-5,4.6-10.4,3.4-16.4"/>
              <polyline class="robot_svg" points="351,261.3 336.7,310.3 343.9,310.3 340.8,321.6 355.9,320 358.4,310.3 359.3,310.3 "/>
              <path class="robot_svg" d="M425.8,165.7"/>
              <path class="robot_svg" d="M428.7,232.6c8.7-20,36.4-83,36.4-83l-5.5-2.3"/>
              <path class="robot_svg" d="M457,116.7l17.9-10.3l10,29l-19.8,11.5c0,0-2.4,0.7-5.5,0.4c-2.4-0.2-5.3-1-7.7-3.3c-1.4-1.3-2.6-3.1-3.6-5.5
                C443.6,126.6,457,116.7,457,116.7"/>
              <path class="robot_svg" d="M424.2,123.6c0.6,2.8,1.7,4.7,2.9,6.1"/>
              <path class="robot_svg" d="M424,115.8c1.4-9.5,9.3-12.2,9.3-12.2l12.9-6.7l28.6,9.4"/>
              <path class="robot_svg" d="M340.8,321.6"/>
              <path class="robot_svg" d="M355.9,320c0.5,0.7,0.1,2-1.6,4.1l7.1-1.3"/>
            
              <a id="popover_led1"
                 data-animation="true"
                 data-container="body"
                 data-html="true"
                 data-content=' 
                              <div class="cover-container d-flex w-100 h-100 mx-auto flex-column">
                                <div class="popver_header"></div>
                                <div class="popver_main container-fluid">
                                  <div class="row">
                                    <div class="col-8 pl-1" >
                                      <span class="rgb_slider">
                                        <div class="d-flex flex-column justify-content-around w-100 h-100">
                                          <input type="text" data-provide="slider" value="" data-slider-min="0" data-slider-max="255" data-slider-step="1" data-slider-value="128" data-slider-id="rgb_r" id="rc" data-slider-tooltip="hide" data-slider-handle="round" />
                                          <input type="text" data-provide="slider" value="" data-slider-min="0" data-slider-max="255" data-slider-step="1" data-slider-value="128" data-slider-id="rgb_g" id="gc" data-slider-tooltip="hide" data-slider-handle="round" />
                                          <input type="text" data-provide="slider" value="" data-slider-min="0" data-slider-max="255" data-slider-step="1" data-slider-value="128" data-slider-id="rgb_b" id="bc" data-slider-tooltip="hide" data-slider-handle="round" />
                                        </div>
                                      </span>
                                    </div>
                                    <div class="col-4 p-0">
                                      <span class="rgb_logo">
                                        <div class="rgb_logo_style d-flex flex-column justify-content-center h-100">
                                            <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
                                              <g>
                                                <g>
                                                  <g>
                                                    <path class="rgb_logo_svg rgb_change" stroke="#ffffff" stroke-width=2 d="M473.534,123.021C478.025,125.628,473.526,123.016,473.534,123.021L473.534,123.021z"/>
                                                    <path class="rgb_logo_svg rgb_change" stroke="#ffffff" stroke-width=2 d="M473.534,123.021c-0.008-0.005-0.016-0.008-0.024-0.013c-0.006-0.003-0.011-0.007-0.017-0.01L263.488,1.995
                                                      c-4.439-2.558-10.097-2.728-14.801-0.094c-0.058,0.032-0.118,0.06-0.176,0.094L38.505,122.998
                                                      c-0.006,0.003-0.011,0.007-0.017,0.01c-0.008,0.005-0.016,0.008-0.024,0.013c-4.5,2.613-7.471,7.549-7.471,12.974v240.006
                                                      c0,5.351,2.967,10.441,7.63,13.065l209.862,120.92c0.003,0.001,0.005,0.003,0.008,0.005c0.003,0.001,0.006,0.003,0.009,0.005
                                                      l0.009,0.005c4.516,2.588,10.089,2.697,14.742,0.125c0.078-0.043,0.158-0.081,0.235-0.125l0.009-0.005
                                                      c0.003-0.002,0.006-0.003,0.009-0.005c0.003-0.001,0.005-0.003,0.008-0.005l209.865-120.922c0.037-0.021,0.074-0.042,0.111-0.063
                                                      l0.004-0.002c0.005-0.003,0.01-0.006,0.015-0.009c4.606-2.656,7.44-7.575,7.491-12.822c0.001-0.056,0.006-0.11,0.006-0.166
                                                      V135.996C481.005,130.549,478.025,125.628,473.534,123.021z M271,40.947l164.865,94.993l-70.869,40.497
                                                      c-21.794-29.777-55.474-50.326-93.996-54.605V40.947z M361.002,255.997c0,18.932-5.038,36.71-13.842,52.064
                                                      c-0.004,0.007-0.009,0.013-0.013,0.02c-0.006,0.01-0.01,0.021-0.015,0.03c-15.756,27.446-43.553,47.131-76.132,51.812v-95.221
                                                      l82.677-47.244C358.403,229.396,361.002,242.398,361.002,255.997z M240.999,40.947v80.885
                                                      c-38.522,4.278-72.202,24.828-93.996,54.605L76.134,135.94L240.999,40.947z M60.995,161.843l71.082,40.618
                                                      c-7.122,16.423-11.08,34.525-11.08,53.536c0,19.011,3.958,37.113,11.08,53.536l-71.082,40.618V161.843z M240.999,471.048
                                                      L76.134,376.054l70.869-40.496c21.794,29.777,55.474,50.326,93.996,54.605V471.048z M240.999,359.925
                                                      c-32.579-4.681-60.375-24.367-76.132-51.812c-0.006-0.01-0.01-0.021-0.015-0.03c-0.004-0.007-0.009-0.013-0.013-0.02
                                                      c-8.803-15.354-13.842-33.132-13.842-52.064c0-13.598,2.599-26.602,7.325-38.539l82.677,47.244V359.925z M255.999,238.72
                                                      l-82.751-47.286c19.234-24.598,49.176-40.439,82.751-40.439c33.574,0,63.516,15.841,82.751,40.439L255.999,238.72z M271,471.047
                                                      v-80.885c38.522-4.278,72.202-24.828,93.996-54.605l70.869,40.496L271,471.047z M451.004,350.152l-71.082-40.619
                                                      c7.122-16.423,11.08-34.525,11.08-53.536c0-19.011-3.958-37.113-11.08-53.536l71.082-40.618V350.152z"/>
                                                  </g>
                                                </g>
                                              </g>
                                            </svg>

          </div>
          </span>
        </div>
      </div>
  </div>
  </div>'>
  <circle class="robot_svg_led1 rgb_change rgb_change_led1_default" cx="246.3" cy="123.6" r="14.3" />
  </a>
  <circle class="robot_svg_led2_mobile led2_mobile_touch" cx="247.8" cy="178" r="27" />
  <circle class="robot_svg_led2 led2_mobile_touch" cx="247.8" cy="178" r="8.7" />
  <path class="robot_svg" d="M451.9,144c-2.1-0.5-7.4-2.1-10.3-6.9c-2.7-4.4-2.7-10.3-0.1-16" />
  <path class="robot_svg" d="M424.5,130.7l1.6,1.3l7.3-16c0,0,2-5.2,7.4-8.3l0,0l7.7,4.2l0,0c-3.2,2.7-5.5,5.9-6.9,9.1l-7.1,15.6l4.3,1.8
              L426.2,165l-0.2,0.6l12.8-27.2L452,144" />
  <line class="robot_svg" x1="130.9" y1="167.6" x2="138.9" y2="171.5" />
  <polyline class="robot_svg" points="368,360.8 408,354.3 421.3,299.3 436.7,348.7 448.5,347 447.4,340.7 438.7,342 418.6,283.5 404,348.5 
              366.9,354.5 " />
  </svg>
  </div>
  <div class="col"></div>
  </div>
  </div>
  </main>
  <footer class="mastfoot mt-auto">
    <p><a id="foot_word">Copyright © 2019 <b>NEXT_Jun</b></a></p>
  </footer>
  </div>
  <!-- 包括所有已编译的插件 -->
  <script src="js/bootstrap.min.js"></script>
  <script src="js/bootstrap.bundle.min.js"></script>
  <script src="js/bootstrap-slider.min.js"></script>
  <script>
    var isMobile = false;

    var rgb_data = { r: null, g: null, b: null };
    var rgb_val = { r: 30, g: 30, b: 30 };
    var message = { r: 0, g: 0, b: 0, signal_led: false, isMobile: false};

    $(function() {
      $("#popover_led1")
        .popover({
          trigger: "click",
          placement: "bottom",
          offset: "180 3px",
          content: function() {
            return $("#popover-content").html();
          }
        })
        .click(function() {
          $("#rc").slider();
          $("#gc").slider();
          $("#bc").slider();

          $("#rc").slider("setValue", rgb_val["r"]);
          $("#gc").slider("setValue", rgb_val["g"]);
          $("#bc").slider("setValue", rgb_val["b"]);    
        
          $('.robot_svg_led1').removeClass('rgb_change_led1_default');
        
          $(".rgb_change").css(
            "fill",
            "rgb(" + rgb_val["r"] + "," + rgb_val["g"] + "," + rgb_val["b"] + ")"
          );
        
          rgb_data["r"] = $("#rc")
            .slider()
            .on("change", rgbChange)
            .data("slider");
          rgb_data["g"] = $("#gc")
            .slider()
            .on("change", rgbChange)
            .data("slider");
          rgb_data["b"] = $("#bc")
            .slider()
            .on("change", rgbChange)
            .data("slider");
        });
        
      if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) 
          || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))) { 
          isMobile = true;
          message["isMobile"] = true;
      }
    });

    $(document).mouseup(function(e) {
      var popbox = $(".popover");
      if (
        !$("#popover_led1").is(e.target) &&
        $("#popover_led1").has(e.target).length === 0 &&
        !popbox.is(e.target) &&
        popbox.has(e.target).length === 0
      ) {
        $("#popover_led1").popover("hide");
      }
    });

    $(".logo").mouseup(function() {
      $('.logo').addClass('logo_rotating');
      setTimeout(function(){
          $('.logo').removeClass('logo_rotating');
        },3000);
    });
    
    $(".robot_svg_led2").mouseenter(function() {
      if(isMobile === false) {
        $(".robot_svg_led2").css("fill","#ff0080");
      message["signal_led"] = true;
      sendMessage();
      }
    });
    $(".robot_svg_led2").mouseleave(function() {
      if(isMobile === false) {
        $(".robot_svg_led2").css("fill","#00000000");
      message["signal_led"] = false;
      sendMessage();
      }
    });

    var led2_mobile_touch_switch = false;    
    $(".led2_mobile_touch").mouseup(function() {
      if(isMobile === true) {
        if(led2_mobile_touch_switch === false){
          led2_mobile_touch_switch = true;
          $(".robot_svg_led2").css("fill","#ff0080");
          message["signal_led"] = true;
          sendMessage();
        } else {
          led2_mobile_touch_switch = false;
          $(".robot_svg_led2").css("fill","#000000");
          message["signal_led"] = false;
          sendMessage();
        }
      }
    });
    /*    
    document.getElementById("led2_mobile_touch_org").addEventListener("touchend", led2Display, false);
    document.getElementById("led2_mobile_touch").addEventListener("touchend", led2Display, false);
    function led2Display() {
      if(isMobile) {
        if(led2_mobile_touch_switch === false){
          led2_mobile_touch_switch = true;
          $(".robot_svg_led2").css("fill","#ff0080");
          message["signal_led"] = true;
          sendMessage();
        } else {
          led2_mobile_touch_switch = false;
          $(".robot_svg_led2").css("fill","#000000");
          message["signal_led"] = false;
          sendMessage();
        }
      }
    };
    */
    var rgbChange = function() {
      rgb_val["r"] = rgb_data["r"].getValue();
      rgb_val["g"] = rgb_data["g"].getValue();
      rgb_val["b"] = rgb_data["b"].getValue();

      $(".rgb_change").css("fill", "rgb("+ rgb_val["r"]+ ","+ rgb_val["g"]+ ","+ rgb_val["b"]+ ")");

      message["r"] = rgb_val["r"];
      message["g"] = rgb_val["g"];
      message["b"] = rgb_val["b"];
      sendMessage();
    };

    var connection = new WebSocket('ws://'+location.hostname+':81/', ['arduino']);

    connection.onopen = function() {
      connection.send('Connect ' + new Date());
    };

    connection.onerror = function(error) {
      console.log('WebSocket Error ', error);
    };

    connection.onmessage = function(e) {
      console.log('Server: ', e.data);
    };

    function sendMessage() {
      var return_data = JSON.stringify(message);
      console.log('Return: ' + return_data);
      connection.send(return_data);
    };

  </script>
</body>

</html>